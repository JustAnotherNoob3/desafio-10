paths:
  /api/carts/:
    post:
      summary: Creates a new Cart.
      tags:
        - Carts
      responses:
        "200":
          description: Successfully created a cart, returns it's ObjectId.
          content:
            application/json:
              schema:
                type: ObjectId
        "400":
          description: Error with the database.
    
  /api/carts/{cid}:
    get:
      summary: Gets the cart with the given ID.
      tags:
        - Carts
      parameters:
      - name: cid
        in: path
        required: true
        description: ID of the cart you are trying to obtain.
      responses:
        "200":
          description: Successfully obtained cart from database.
          content:
            application/json:
              schema:
                $ref: '#components/schemas/Cart'
        "400":
          description: Given ID was not found on the database.
    put:
      summary: Updates the cart with the given ID.
      tags:
        - Carts
      parameters:
      - name: cid
        in: path
        required: true
        description: ID of the cart you are trying to modify.
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#components/requestBodies/modifyCart'
      responses:
        "200":
          description: Successfully modified product from database.
        "400":
          description: Given ID was not found on the database.
    delete:
      summary: Deletes all the products in the cart with the given ID.
      tags:
        - Carts
      parameters:
      - name: cid
        in: path
        required: true
        description: ID of the product you are trying to delete.
      responses:
        "200":
          description: Successfully deleted product from database.
          
        "400":
          description: Given ID was not found on the database.
  /api/carts/{cid}/products/{pid}:
    post:
      summary: Adds the product with the given PID into the cart with the given CID.
      tags:
        - Carts
      parameters:
      - name: cid
        in: path
        required: true
        description: ID of the cart you are trying to modify.
      - name: pid
        in: path
        required: true
        description: ID of the product you are trying to add.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#components/requestBodies/addProduct'
      responses:
        "200":
          description: Successfully added the product to cart.
          content:
            application/json:
              schema:
                type: Number
                description: Number of that product in the cart.
        "400":
          description: One of the IDs was not found on the database.
    put:
      summary: Updates the quantity of product in the cart with the given ID.
      tags:
        - Carts
      parameters:
      - name: cid
        in: path
        required: true
        description: ID of the cart you are trying to modify.
      - name: pid
        in: path
        required: true
        description: ID of the product you are trying to modify.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#components/requestBodies/addCart'
      responses:
        "200":
          description: Successfully modified product from database.
        "400":
          description: One of the IDs was not found on the database.
    delete:
      summary: Deletes the product in the cart with the given ID.
      tags:
        - Carts
      parameters:
      - name: cid
        in: path
        required: true
        description: ID of the cart you are trying to modify.
      - name: pid
        in: path
        required: true
        description: ID of the product you are trying to delete.
      responses:
        "200":
          description: Successfully deleted product from the cart.
          
        "400":
          description: One of the IDs was not found on the database.


components:
  schemas:
    Cart:
      type: object
      properties:
        _id:
          type: ObjectId
          description: Autogenerated ID.
        products:
          type: array
          description: Products contained by the cart.
          items:
            type: object
            properties:
              product:
                type: ObjectId
                description: ObjectId of the product.
              quantity:
                type: Number
                description: Amount of the product type on the cart.   
  requestBodies:
    addProduct:
      type: object
      properties:
        quantity:
          type: Number
          description: Number of products to add.
    modifyCart:
      type: object
      properties:
        products:
          type: array
          description: Products contained by the cart.
          items:
            type: object
            properties:
              product:
                type: ObjectId
                description: ObjectId of the product.
              quantity:
                type: Number
                description: Amount of the product type on the cart.   

