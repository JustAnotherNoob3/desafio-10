paths:
  /api/products/:
    get:
      summary: Gets all products.
      tags:
        - Products
      responses:
        "200":
          description: Successfully obtained all products from database.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#components/schemas/Product'
        "400":
          description: Bad query.
    post:
      summary: Creates a new product.
      tags:
        - Products
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#components/requestBodies/newProduct'
      responses:
        "200":
          description: Successfully created a product, returns it's ObjectId.
          content:
            application/json:
              schema:
                type: ObjectId
        "400":
          description: Given product did not meet the scheme.
    
  /api/products/{pid}:
    get:
      summary: Gets the product with the given ID.
      tags:
        - Products
      parameters:
      - name: pid
        in: path
        required: true
        description: ID of the product you are trying to obtain.
      responses:
        "200":
          description: Successfully obtained product from database.
          content:
            application/json:
              schema:
                $ref: '#components/schemas/Product'
        "400":
          description: Given ID was not found on the database.
    put:
      summary: Updates the product with the given ID.
      tags:
        - Products
      parameters:
      - name: pid
        in: path
        required: true
        description: ID of the product you are trying to modify.
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#components/requestBodies/newProduct'
      responses:
        "200":
          description: Successfully modified product from database.
          
        "400":
          description: Given ID was not found on the database.
    delete:
      summary: Deletes the product with the given ID.
      tags:
        - Products
      parameters:
      - name: pid
        in: path
        required: true
        description: ID of the product you are trying to delete.
      responses:
        "200":
          description: Successfully deleted product from database.
          
        "400":
          description: Given ID was not found on the database.


components:
  schemas:
    Product:
      type: object
      properties:
        _id:
          type: ObjectId
          description: Autogenerated ID.
        title:
          type: String
          description: Title of the product.
        description:
          type: String
          description: Description of the product.
        code:
          type: String
          description: Unique user-given code for an easy memorization.
        price:
          type: Number
          description: The price of the product.
        status:
          type: Boolean
          description: Whether or not the product is being sold.
        stock:
          type: Number
          description: The stock left of the product.
        category:
          type: String
          description: The category of the product.
        owner:
          type: String
          description: The email of the product's owner, or admin.
  requestBodies:
    newProduct:
      type: object
      properties:
        title:
          type: String
          description: Title of the product.
        description:
          type: String
          description: Description of the product.
        code:
          type: String
          description: Unique user-given code for an easy memorization.
        price:
          type: Number
          description: The price of the product.
        status:
          type: Boolean
          description: Whether or not the product is being sold.
        stock:
          type: Number
          description: The stock left of the product.
        category:
          type: String
          description: The category of the product.

